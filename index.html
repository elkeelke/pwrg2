<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.22">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Elke Michlmayr">

<title>Remote Sensing Data for Life Cycle Assessment</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="index_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-7b4406b7675125bc2ba204020e191172.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap-be9206a58a27969b3ea3001da8f26fef.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="index.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Remote Sensing Data for Life Cycle Assessment</h1>
<p class="subtitle lead">Project proposal</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Elke Michlmayr </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Life Cycle Assessment (LCA) as defined in <span class="citation" data-cites="ISO14040">(<a href="#ref-ISO14040" role="doc-biblioref">International Organization for Standardization, 2006a</a>)</span> and <span class="citation" data-cites="ISO14044">(<a href="#ref-ISO14044" role="doc-biblioref">International Organization for Standardization, 2006b</a>)</span> is a standardized tool used to evaluate the environmental impacts associated with every stage of a product or service’s life, from raw material extraction through production, use, and disposal. Central to the accuracy and usefulness of an LCA is the availability and quality of the underlying data. Without robust and representative data, the conclusions drawn from an LCA risk being misleading or incomplete.</p>
<p>Remote sensing, particularly through satellites, provides vast amounts of data. Satellites offer a unique, large-scale perspective for continuous observation of the Earth’s surface and atmosphere. They collect data that can be directly or indirectly used to assess land cover, vegetation health, surface temperatures, atmospheric gases, and ocean characteristics. All of these are essential for understanding environmental trends and changes over time. Satellite derived data supports a wide range of applications, from climate modeling and disaster response to agricultural planning.</p>
<p>The focus of this work is to explore if and how observational satellite data can be integrated into LCA to enhance the accuracy of environmental impact evaluations in various stages, especially in the inventory and modeling phases, where accurate, detailed, and geographically specific information is essential. While remote sensing supplies the observational data, LCA offers the framework for quantifying and interpreting environmental impacts.</p>
</section>
<section id="overview-satellite-data-for-earth-observation" class="level1">
<h1>Overview: Satellite data for earth observation</h1>
<p>The focus of this work is on satellites that provide observational data of the Earth for environmental monitoring. The many other existing use cases for satellites in communication, broadcasting, navigation, and for military purposes will not be discussed.</p>
<p>There are several different types of methods to sense the data: optical, thermal, and radar based as summarized in <a href="#tbl-methods" class="quarto-xref">Table&nbsp;1</a>. Optical methods detect sunlight reflected by clouds, land, and oceans, e.g., for red and blue visible light reflectance. Near-infrared (NIR) and infrared (IR) is invisible to the human eye. NIR is strongly reflected by vegetation, and absorbed by water. Therefore, NIR based methods make land cover, plant health, and boundaries between land and water easy to detect. IR detects thermal radiation, i.e.&nbsp;heat, emitted from the Earth and atmosphere at day and night. This is useful for observation of temperature and moisture or dryness as well as atmospheric gaseous water vapor. Synthetic Aperture Radar (SAR) is an active method that works at night and through clouds (unlike the other methods). It detects surface structure and moisture.</p>
<div id="tbl-methods" class="table quarto-float quarto-figure quarto-figure-center anchored" data-caption="Methods for sensing">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl quarto-uncaptioned" id="tbl-methods-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1
</figcaption>
<div aria-describedby="tbl-methods-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 42%">
<col style="width: 23%">
<col style="width: 15%">
<col style="width: 18%">
</colgroup>
<thead>
<tr class="header">
<th>Method</th>
<th>Key feature</th>
<th>Works at night</th>
<th>Cloud penetrating</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Optical (incl.&nbsp;Near-Infrared, NIR)</td>
<td>Reflects sunlight</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="even">
<td>Thermal Infrared (IR)</td>
<td>Detects heat</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Synthetic Aperture Radar (SAR)</td>
<td>Uses radar</td>
<td>Yes</td>
<td>Yes</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>At a high level, satellites can be categorized based on their orbital types, which determine their position and altitude, and consequently coverage and purpose:</p>
<ol type="1">
<li><p>Low Earth Orbit (LEO) satellites orbit at altitudes between 160 and 2.000 kilometers. They are known for their high resolution data. A subset of them, polar orbits, pass over the Earth’s poles and provide global coverage as the planet rotates beneath them. Another subset is sun-synchronous orbits, which maintain a consistent position relative to the sun, allowing satellites to observe the Earth under similar lighting conditions with each pass.</p></li>
<li><p>Medium Earth Orbit (MEO) satellites operate at altitudes ranging above 2.000 and below 35.000 kilometers. They are typically used for navigation services such as devised based on Assisted Global Navigation Satellite Systems as defined in <span class="citation" data-cites="3gppagnss">(<a href="#ref-3gppagnss" role="doc-biblioref">3rd Generation Partnership Project (3GPP), 2019</a>)</span>, which rely on acquiring and decoding satellite signals to determine their position.</p></li>
<li><p>Geostationary Earth Orbit (GEO) satellites are located above the equator at 35.786 kilometers, which matches the Earth’s rotation period, to provide continuous observation of a fixed region of the Earth. They are known for providing low resolution data with high update frequency. The data provided is often used for weather and broad climate monitoring.</p></li>
</ol>
<p>Each of these orbital satellite types serves different purposes. The satellite orbital types most common for earth observation are LEO and GEO satellites. In the following, an overview of available public domain and commercial observational satellite data of these types that could potentially be relevant for LCA is provided.</p>
<section id="geostationary-earth-orbit-geo-satellites" class="level2">
<h2 class="anchored" data-anchor-id="geostationary-earth-orbit-geo-satellites">Geostationary Earth Orbit (GEO) satellites</h2>
<p>Observational Geostationary Earth Orbit satellites provide continuous, real-time monitoring of atmospheric conditions, cloud cover, sea surface temperatures, and solar radiation over large fixed regions. They have lower spatial resolution compared to LEO satellites, but this is being compensated by providing high temporal resolution. <a href="#tbl-geo-satellites" class="quarto-xref">Table&nbsp;2</a> provides an overview of the existing GEO satellites, their operators, the regions covered, the type of access and, if relevant, the license that the data is available under.</p>
<div id="tbl-geo-satellites" class="table quarto-float quarto-figure quarto-figure-center anchored" data-caption="GEO satellites overview">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl quarto-uncaptioned" id="tbl-geo-satellites-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2
</figcaption>
<div aria-describedby="tbl-geo-satellites-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 32%">
<col style="width: 14%">
<col style="width: 21%">
<col style="width: 32%">
</colgroup>
<thead>
<tr class="header">
<th>Satellite / Series</th>
<th>Operator / Agency</th>
<th>Region Covered</th>
<th>Licensing</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>GOES series (GOES-16, GOES-17, GOES-18)</td>
<td>NOAA (USA)</td>
<td>Americas</td>
<td>Most data available under NOAA’s data policy</td>
</tr>
<tr class="even">
<td>Meteosat (MSG and MTG series)</td>
<td>EUMETSAT (Europe)</td>
<td>Europe, Africa, Atlantic Ocean</td>
<td>Open access under EUMETSAT’s data policy</td>
</tr>
<tr class="odd">
<td>Himawari series (8 and 9)</td>
<td>JMA (Japan)</td>
<td>Asia-Pacific region</td>
<td>Open access for research and public use</td>
</tr>
<tr class="even">
<td>INSAT/GSAT series (INSAT-3D, INSAT-3DR)</td>
<td>ISRO (India)</td>
<td>Indian subcontinent</td>
<td>Limited public access</td>
</tr>
<tr class="odd">
<td>Fengyun series (FY-2, FY-4)</td>
<td>CMA (China)</td>
<td>Asia-Pacific region</td>
<td>Restricted access for partners</td>
</tr>
<tr class="even">
<td>Electro-L series</td>
<td>Russian Space Agency</td>
<td>Russia, Europe, parts of Asia</td>
<td>Limited public access</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>The three satellite series where data that is accessible under open licenses offer data delivery frequencies between 5 and 15 minutes for full images. They provide similar imaging capabilities: 16 spectral ranges of wavelengths, called bands or channels, collected by the satellite sensor as discrete portions of the electromagnetic spectrum. Each series provides comparable numbers of optical, near-infrared and infrared channels.</p>
<p>They support rapid scan modes for their regions of focus with data delivery frequencies between 30 seconds and 5 minutes. These are used for detecting fast-changing weather and environmental events such as storms, tornadoes, wildfires and volcanic eruptions, and for short-term weather forecasting (called now-casting).</p>
<p>To summarize, GEO satellites for Earth observation are most helpful for high-frequency monitoring of large-scale land and ocean processes.</p>
</section>
<section id="low-earth-orbit-leo-satellites" class="level2">
<h2 class="anchored" data-anchor-id="low-earth-orbit-leo-satellites">Low Earth Orbit (LEO) satellites</h2>
<p>Far more LEO satellites for Earth observation than GEO satellites exist: around 35 GEO satellites compared to around 1000 LEO satellites. <a href="#tbl-leo-satellites" class="quarto-xref">Table&nbsp;3</a> provides a non-exhaustive listing of the most relevant providers together with the resolution and revisit frequency of the data provided. Note that some providers have more than one satellite on offer. In these cases only the one with the highest resolution and revisit frequency is listed. The newest satellites are Biomass from ESA for forest biomass and carbon content monitoring, and FireSat and OroraTech for wildfire detection. The (*) sign indicates future plans.</p>
<div id="tbl-leo-satellites" class="table quarto-float quarto-figure quarto-figure-center anchored" data-caption="LEO satellites overview">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl quarto-uncaptioned" id="tbl-leo-satellites-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3
</figcaption>
<div aria-describedby="tbl-leo-satellites-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 29%">
<col style="width: 11%">
<col style="width: 31%">
<col style="width: 27%">
</colgroup>
<thead>
<tr class="header">
<th>Satellite / provider</th>
<th>Access</th>
<th>Resolution</th>
<th>Revisit Frequency</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Landsat 8 &amp; 9</td>
<td>open</td>
<td>15 – 30 m multispectral</td>
<td>8 days (combined)</td>
</tr>
<tr class="even">
<td>Sentinel-1 (A &amp; B/C)</td>
<td>open</td>
<td>5 – 20 m SAR</td>
<td>6 days (combined)</td>
</tr>
<tr class="odd">
<td>Sentinel-2 (A, B &amp; C)</td>
<td>open</td>
<td>10 – 60 m multispectral</td>
<td>5 days (combined)</td>
</tr>
<tr class="even">
<td>MODIS (Terra, Aqua)</td>
<td>open</td>
<td>250 m – 1 km multispectral</td>
<td>Daily</td>
</tr>
<tr class="odd">
<td>Biomass</td>
<td>open (*)</td>
<td>10 m P-band SAR</td>
<td>Up to 16 orbits/day</td>
</tr>
<tr class="even">
<td>Planet Labs</td>
<td>commercial</td>
<td>3 – 5 m optical</td>
<td>Daily</td>
</tr>
<tr class="odd">
<td>Maxar WorldView</td>
<td>commercial</td>
<td>30 – 50 cm optical</td>
<td>Up to 15 orbits/day</td>
</tr>
<tr class="even">
<td>Airbus</td>
<td>commercial</td>
<td>30 cm optical</td>
<td>1–3 days</td>
</tr>
<tr class="odd">
<td>Iceye</td>
<td>commercial</td>
<td>0.5 m SAR</td>
<td>Daily to sub-daily</td>
</tr>
<tr class="even">
<td>Capella Space</td>
<td>commercial</td>
<td>0.5 m SAR</td>
<td>Daily to sub-daily</td>
</tr>
<tr class="odd">
<td>GHGSat</td>
<td>commercial</td>
<td>25 m</td>
<td>Variable</td>
</tr>
<tr class="even">
<td>FireSat</td>
<td>commercial</td>
<td>5 m thermal IR</td>
<td>30 minutes (*)</td>
</tr>
<tr class="odd">
<td>OroraTech</td>
<td>commercial</td>
<td>Variable thermal IR</td>
<td>30 minutes (*)</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>To summarize, LEO satellites play a crucial role in Earth observation, particularly for high-resolution and frequent monitoring. The revisit frequency is primarily determined by the size of the satellite constellation. Larger constellations, such as those with over 100 satellites, can achieve revisit frequencies approaching those of geostationary systems. While a few public providers offer open-access data, many different commercial options are on the market.</p>
<!-- 
| RapidEye                    | commercial | 5 m multispectral             | Daily                      | medium-resolution multispectral                             |
| Deimos-1 & 2                | commercial | 22 m (D1), 75 cm (D2) optical | 1–3 days                   | commercial EO satellites                                    |
| Satellogic                  | commercial | <1 m multispectral            | Daily                      | medium-resolution multispectral                             |
| BlackSky                    | commercial | \~90 cm optical               | Multiple times daily       | rapid revisit, analytics platform                           |
-->
</section>
</section>
<section id="literature-study-satellite-data-for-lca" class="level1">
<h1>Literature study: Satellite data for LCA</h1>
<p>Use cases: forest, water (?), contrails (??)</p>
<p>https://scholar.google.com/scholar?hl=en&amp;as_sdt=0,5&amp;qsp=2&amp;q=forest+loss+life+cycle+assessment&amp;qst=bl</p>
<p>Amazon often full with clouds, gets exploited by loggers</p>
<p>Dieser Schweizer Bauer hat ein Wassersystem für die Zukunft gebaut https://www.tagesanzeiger.ch/katzhof-richenthal-der-klimaresistenteste-hof-der-schweiz-526267449775</p>
<p>Which aggregation levels are in use</p>
<ol start="2014" type="1">
<li>Assessing biodiversity loss due to land use with Life Cycle Assessment: are we there yet? https://onlinelibrary.wiley.com/doi/full/10.1111/gcb.12709 LCA mainly introduces biodiversity as an endpoint category modeled as a loss in species richness due to the conversion and use of land over time and space. The functional and population effects on biodiversity are mostly absent due to the emphasis on species accumulation with limited geographic and taxonomical reach. Current land-use modeling activities that use biodiversity indicators tend to oversimplify the real dynamics and complexity of the interactions of species among each other and with their habitats.</li>
</ol>
<p>Quantifying the Environmental Impacts of Manufacturing Low Earth Orbit (LEO) Satellite Constellations https://www.mdpi.com/2071-1050/16/21/9431</p>
<p>Existing estimates for environmental impact of satellites</p>
<p>International Journal of Applied Earth Observation and Geoinformation</p>
<p><span class="citation" data-cites="zhao2022overview">Zhao et al. (<a href="#ref-zhao2022overview" role="doc-biblioref">2022</a>)</span> conduct a literature study of scientific article that reference EO satellite missions and find that their number is exponentially growing and that most of the work is based on the freely available data. TBD Worldview mentioned</p>
<p>Contrail Cirrus Climate Impact: From Radiative Forcing to Surface Temperature Change https://journals.ametsoc.org/view/journals/clim/38/8/JCLI-D-24-0245.1.pdf</p>
<p>Evidence for climate change in the satellite cloud record https://www.nature.com/articles/nature18273 Clouds play a huge role in Earth’s temperature by both reflecting sunlight back into space (a cooling effect) and trapping heat from the ground (a warming effect). How clouds will change due to global warming has been one of the biggest questions in climate science. Climate models and real-world observations didn’t agree on how clouds have changed in recent decades. This is largely because the satellites used to monitor clouds were built for short-term weather forecasting, not for tracking subtle, long-term climate changes. The data from these older systems needed to be carefully corrected to be reliable. This study successfully corrected several independent satellite records from the 1980s to the 2000s. After correction, the data revealed large-scale cloud changes that match the predictions made by climate models. Both the real-world data and the computer models show the same patterns: Storm tracks are moving away from the equator and towards the poles. Subtropical dry zones are expanding. The highest cloud tops are getting even higher. The main causes for these changes are rising greenhouse gas concentrations and the planet warming up after the cooling effects of past volcanic eruptions. This research shows that the cloud changes long predicted by climate models are actually happening now.</p>
<p>Earth’s long-term climate stabilized by clouds https://www.nature.com/articles/s41561-021-00691-7?fromPaywallRec=true Billions of years ago, the Sun was much dimmer than it is today.Logically, Earth should have been a frozen ice ball, but evidence shows it had liquid water. This mystery is called the “faint young Sun problem.” For a long time, scientists thought the solution was a much stronger greenhouse effect. The idea was that early Earth’s atmosphere was filled with extra greenhouse gases (like CO₂), which trapped the Sun’s faint heat and kept the planet warm enough for liquid water. This study suggests a different key factor: clouds. Researchers used climate models to look back in time. They found that with a dimmer sun and more CO₂, early Earth had far fewer low-level clouds than it does today. Fewer clouds meant less sunlight was reflected away from the planet’s surface. Think of it like a dark t-shirt absorbing more sunlight than a white one. By absorbing more of the Sun’s faint energy, the planet stayed warm. This cloud effect was incredibly powerful, providing about 40% of the warming needed to solve the problem.</p>
</section>
<section id="tools-and-datasets" class="level1">
<h1>Tools and datasets</h1>
<p>GlobalBuildingAtlas: https://github.com/zhu-xlab/GlobalBuildingAtlas?tab=readme-ov-file</p>
<p><span class="citation" data-cites="neumann2025natural">Neumann et al. (<a href="#ref-neumann2025natural" role="doc-biblioref">2025</a>)</span> Forest stuff PhD student: https://github.com/SherryJYC</p>
<p>Remote sensing agriculture: Bruno Basso https://scholar.google.com/citations?user=EItklH0AAAAJ&amp;hl=en</p>
<p>Agriculture: The Cropland Data Layer (CDL) is a dataset provided by the U.S. Department of Agriculture’s National Agricultural Statistics Service (NASS) that provides information about crop types across the United States.</p>
</section>
<section id="project-proposal" class="level1">
<h1>Project proposal</h1>
<p>Ideas:</p>
<ul>
<li><p>Use ESA Biomass satellite for LCA for forest loss</p></li>
<li><p>ML for LCA?</p></li>
<li><p>Modelling with Python?</p></li>
</ul>
</section>
<section id="project-plan" class="level1">
<h1>Project plan</h1>
</section>
<section id="references" class="level1 unnumbered">


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list">
<div id="ref-3gppagnss" class="csl-entry" role="listitem">
3rd Generation Partnership Project (3GPP). (2019). <em><span>3GPP TS 36.355 V15.3.0 - LTE Positioning Protocol A (LPPa)</span></em>. 3GPP.
</div>
<div id="ref-ISO14040" class="csl-entry" role="listitem">
International Organization for Standardization. (2006a). <em><span class="nocase">ISO 14040:2006 Environmental management – Life cycle assessment – Principles and framework</span></em>. International Organization for Standardization.
</div>
<div id="ref-ISO14044" class="csl-entry" role="listitem">
International Organization for Standardization. (2006b). <em><span class="nocase">ISO 14044:2006 Environmental management – Life cycle assessment – Requirements and guidelines</span></em>. International Organization for Standardization.
</div>
<div id="ref-neumann2025natural" class="csl-entry" role="listitem">
Neumann, M., Raichuk, A., Stanimirova, R., Sims, M., Carter, S., Goldman, E., Rey, M., Jiang, Y., Anderson, K., Poklukar, P., et al. (2025). <em>Natural forests of the world-a 2020 baseline for deforestation and degradation monitoring</em>.
</div>
<div id="ref-zhao2022overview" class="csl-entry" role="listitem">
Zhao, Q., Yu, L., Du, Z., Peng, D., Hao, P., Zhang, Y., and Gong, P. (2022). An overview of the applications of earth observation satellite data: Impacts and future trends. <em>Remote Sensing</em>, <em>14</em>(8), 1863.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>